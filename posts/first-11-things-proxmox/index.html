<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="robots" content="all" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="google-site-verification" content="NqibrxbTQ3FPfyJuuSPcSi39c5Qiqf57zoBYqWxd2dg" /><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Before I do anything on Proxmox, I do this first…" /><meta property="og:locale" content="en" /><meta name="description" content="Documentation for Techno Tim YouTube videos for all your copy pasta needs!" /><meta property="og:description" content="Documentation for Techno Tim YouTube videos for all your copy pasta needs!" /><link rel="canonical" href="https://docs.technotim.live/posts/first-11-things-proxmox/" /><meta property="og:url" content="https://docs.technotim.live/posts/first-11-things-proxmox/" /><meta property="og:site_name" content="Techno Tim Documentation" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-28T08:00:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Before I do anything on Proxmox, I do this first…" /><meta name="twitter:site" content="@technotimlive" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-02-13T22:38:32-06:00","datePublished":"2020-11-28T08:00:00-06:00","description":"Documentation for Techno Tim YouTube videos for all your copy pasta needs!","headline":"Before I do anything on Proxmox, I do this first…","mainEntityOfPage":{"@type":"WebPage","@id":"https://docs.technotim.live/posts/first-11-things-proxmox/"},"url":"https://docs.technotim.live/posts/first-11-things-proxmox/"}</script><title>Before I do anything on Proxmox, I do this first... | Techno Tim Documentation</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim Documentation"><meta name="application-name" content="Techno Tim Documentation"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1872619258207885" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NZ5V7DM8F5"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NZ5V7DM8F5'); }); </script><link type="application/atom+xml" rel="alternate" href="https://docs.technotim.live/feed.xml" title="Techno Tim Documentation" /><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4 " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Techno Tim Documentation</a></div><div class="site-subtitle font-italic">Video documentation for all your copy pasta needs!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.youtube.com/channel/UCOk-gHyjcWZNj3Br4oxwh0A" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://twitch.tv/technotim" aria-label="twitch" target="_blank" rel="noopener"> <i class="fab fa-twitch"></i> </a> <a href="https://patreon.com/technotim" aria-label="patreon" target="_blank" rel="noopener"> <i class="fab fa-patreon"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a> <a href="https://discord.gg/akMB4HJpvF" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://github.com/timothystewart6" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a><div class="d-flex flex-wrap justify-content-center"><div class="p-1 text-small-left">527 stars</div><div class="p-1">179 forks</div></div></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Before I do anything on Proxmox, I do this first...</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Before I do anything on Proxmox, I do this first...</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/technotimlive">Techno Tim</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1606572000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-11-28 </em> </span> <span> Updated <em class="timeago" data-ts="1644813512" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-02-13 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="467 words"> <em>2 min</em> read</span></div></div></div><div class="post-content"><p><a href="https://www.youtube.com/watch?v=GoZaMgEgrHw" title="Before I do anything on Proxmox, I do this first..."><img data-src="https://img.youtube.com/vi/GoZaMgEgrHw/0.jpg" alt="Before I do anything on Proxmox, I do this first..." data-proofer-ignore></a></p><p>After setting up my Proxmox servers, there are a few thigns I do before I use them for their intended purpose. This ranges from updates, to storage, to networking and VLANS, to uploading ISOs, to clustering, and more. Join me as we pick up where the rest of the proxmox tutorials stop, and that’s everything you need to do to make these production ready (and maybe a bonus item too).</p><p><a href="https://www.youtube.com/watch?v=GoZaMgEgrHw">Watch Video</a></p><p>See all the hardware I recommend at <a href="https://kit.co/TechnoTim">https://kit.co/TechnoTim</a></p><p>Don’t forget to check out the <a href="https://l.technotim.live/quick-start">🚀Launchpad repo</a> with all of the quick start source files.</p><h2 id="updates">Updates<a href="#updates" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Edit <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list</code></p><h3 id="proxmox-version-6x">Proxmox Version 6.X<a href="#proxmox-version-6x" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>deb http://ftp.us.debian.org/debian buster main contrib

deb http://ftp.us.debian.org/debian buster-updates main contrib

<span class="c"># security updates</span>
deb http://security.debian.org buster/updates main contrib

<span class="c"># not for production use</span>
deb http://download.proxmox.com/debian buster pve-no-subscription
</pre></table></code></div></div><h3 id="proxmox-version-7x">Proxmox Version 7.X<a href="#proxmox-version-7x" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>(for a full guide on Proxmox 7, please <a href="https://docs.technotim.live/posts/proxmox-7/">see this link</a>)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>deb http://ftp.debian.org/debian bullseye main contrib

deb http://ftp.debian.org/debian bullseye-updates main contrib

<span class="c"># security updates</span>
deb http://security.debian.org/debian-security bullseye-security main contrib

<span class="c"># PVE pve-no-subscription repository provided by proxmox.com,</span>
<span class="c"># NOT recommended for production use</span>
deb http://download.proxmox.com/debian/pve bullseye pve-no-subscription
</pre></table></code></div></div><p>Edit <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list.d/pve-enterprise.list</code></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="c"># deb https://enterprise.proxmox.com/debian/pve buster pve-enterprise</span>
</pre></table></code></div></div><p>Run</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>apt-get update
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>apt dist-upgrade
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>reboot
</pre></table></code></div></div><h2 id="storage">Storage<a href="#storage" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>BE CAREFUL. This will wipe your disks.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>fdisk /dev/sda
</pre></table></code></div></div><p>Then P for partition, then D for delete, then W for write.</p><h2 id="check-smart-monitoring">Check SMART Monitoring<a href="#check-smart-monitoring" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>smartctl <span class="nt">-a</span> /dev/sda
</pre></table></code></div></div><h2 id="iommu-pci-passthrough">IOMMU (PCI Passthrough)<a href="#iommu-pci-passthrough" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>See <a href="https://pve.proxmox.com/wiki/Pci_passthrough">Proxmox PCI Passthrough</a></p><p><code class="language-plaintext highlighter-rouge">nano /etc/default/grub</code></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">"quiet intel_iommu=on"</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">update-grub</code></p><p>Edit <code class="language-plaintext highlighter-rouge">/etc/modules</code></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>vfio
vfio_iommu_type1
vfio_pci
vfio_virqfd
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">update-initramfs -u -k all</code></p><p><code class="language-plaintext highlighter-rouge">reboot</code></p><h2 id="vlan-aware">VLAN Aware<a href="#vlan-aware" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>If you want to restrict your VLANS</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nano /etc/network/interfaces
</pre></table></code></div></div><p>Set your VLAN here</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>bridge-vlan-aware <span class="nb">yes
</span>bridge-vids 20
</pre></table></code></div></div><h2 id="nic-team-example">NIC Team Example<a href="#nic-team-example" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nano /etc/network/interfaces
</pre></table></code></div></div><div class="language-conf highlighter-rouge"><div class="code-header"> <span label-text="Conf"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="n">auto</span> <span class="n">eno1</span>
<span class="n">iface</span> <span class="n">eno1</span> <span class="n">inet</span> <span class="n">manual</span>

<span class="n">auto</span> <span class="n">eno2</span>
<span class="n">iface</span> <span class="n">eno2</span> <span class="n">inet</span> <span class="n">manual</span>

<span class="n">auto</span> <span class="n">bond0</span>
<span class="n">iface</span> <span class="n">bond0</span> <span class="n">inet</span> <span class="n">manual</span>
        <span class="n">bond</span>-<span class="n">slaves</span> <span class="n">eno1</span> <span class="n">eno2</span>
        <span class="n">bond</span>-<span class="n">miimon</span> <span class="m">100</span>
        <span class="n">bond</span>-<span class="n">mode</span> <span class="m">802</span>.<span class="m">3</span><span class="n">ad</span>
        <span class="n">bond</span>-<span class="n">xmit</span>-<span class="n">hash</span>-<span class="n">policy</span> <span class="n">layer2</span>+<span class="m">3</span>

<span class="n">auto</span> <span class="n">vmbr0</span>
<span class="n">iface</span> <span class="n">vmbr0</span> <span class="n">inet</span> <span class="n">static</span>
        <span class="n">address</span> <span class="m">192</span>.<span class="m">168</span>.<span class="m">0</span>.<span class="m">11</span>/<span class="m">24</span>
        <span class="n">gateway</span> <span class="m">192</span>.<span class="m">168</span>.<span class="m">0</span>.<span class="m">1</span>
        <span class="n">bridge</span>-<span class="n">ports</span> <span class="n">bond0</span>
        <span class="n">bridge</span>-<span class="n">stp</span> <span class="n">off</span>
        <span class="n">bridge</span>-<span class="n">fd</span> <span class="m">0</span>
        <span class="n">bridge</span>-<span class="n">vlan</span>-<span class="n">aware</span> <span class="n">yes</span>
        <span class="n">bridge</span>-<span class="n">vids</span> <span class="m">2</span>-<span class="m">4094</span>
<span class="c">#lacp nic team
</span></pre></table></code></div></div><p><strong>If you’re running Proxmox 7, see the modified <a href="https://docs.technotim.live/posts/proxmox-7/">config here</a> for LAGG / LACP</strong></p><h2 id="cloning">Cloning<a href="#cloning" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>These are the commands I run after cloning a Linux machine so that it resets all information for the machine it was cloned from.</p><p>change hostname</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano  /etc/hostname
</pre></table></code></div></div><ul><li>find your hostname and change it</ul><p>change hosts file</p><ul><li>find your hostname and change it</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/hosts
</pre></table></code></div></div><p>reset machine ID</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">rm</span> <span class="nt">-f</span> /etc/machine-id /var/lib/dbus/machine-id
dbus-uuidgen <span class="nt">--ensure</span><span class="o">=</span>/etc/machine-id
dbus-uuidgen <span class="nt">--ensure</span>
</pre></table></code></div></div><p>regenerate ssh keys</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>regen ssh keys
<span class="nb">sudo rm</span> /etc/ssh/ssh_host_<span class="k">*</span>
<span class="nb">sudo </span>dpkg-reconfigure openssh-server
</pre></table></code></div></div><p>reboot</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/proxmox/'>proxmox</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/proxmox/" class="post-tag no-text-decoration" >proxmox</a> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Before I do anything on Proxmox, I do this first... - Techno Tim Documentation&amp;url=https://docs.technotim.live/posts/first-11-things-proxmox/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Before I do anything on Proxmox, I do this first... - Techno Tim Documentation&amp;u=https://docs.technotim.live/posts/first-11-things-proxmox/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://docs.technotim.live/posts/first-11-things-proxmox/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/k3s-traefik-rancher/">Configuring Traefik 2 Ingress for Kubernetes</a><li><a href="/posts/authelia-traefik/">2 Factor Auth and Single Sign on with Authelia</a><li><a href="/posts/webtop-container/">Linux desktop, inside of a container, inside of a browser??? Yes. A Webtop.</a><li><a href="/posts/self-hosting-security/">Self-Hosting Security Guide for your HomeLab</a><li><a href="/posts/windows-11-proxmox/">Virtualize Windows 11 with Proxmox the Right Way!</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/windows-11-proxmox/"><div class="card-body"> <em class="timeago small" data-ts="1634907600" > 2021-10-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtualize Windows 11 with Proxmox the Right Way!</h3><div class="text-muted small"><p> Windows 11 is here and with it comes new hardware requirements. These requirements not only affect physical hardware but also virtual hardware too. The TPM 2.0 requirement for Windows 11 is sha...</p></div></div></a></div><div class="card"> <a href="/posts/grafana-loki-kubernetes/"><div class="card-body"> <em class="timeago small" data-ts="1637409600" > 2021-11-20 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing Grafana Loki with Helm on Kubernetes</h3><div class="text-muted small"><p> In my previous video (Meet Grafana LOKI, a log aggregation system for everything and post, I promised that I would also explain how to install Granfana Loki on Kubernetes using helm. If you’re loo...</p></div></div></a></div><div class="card"> <a href="/posts/virtualize-vs-containerize/"><div class="card-body"> <em class="timeago small" data-ts="1591452000" > 2020-06-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtualize vs. Containerize (Which should I choose?)</h3><div class="text-muted small"><p> Should I virtualize this? Should I containerize this? These are great questions to ask yourself when spinning up self-hosted services in your Homelab environment. We’ll review my previous vide...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/1u-server-upgrade/" class="btn btn-outline-primary" prompt="Older"><p>My HUGE (but small) 1U Server Upgrade</p></a> <a href="/posts/ha-pi-hold-gravity-sync/" class="btn btn-outline-primary" prompt="Newer"><p>High Availability Pi-Hole? Yes please!</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/technotimlive">Techno Tim</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', limit: 10000, templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NZ5V7DM8F5"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NZ5V7DM8F5'); }); </script>
